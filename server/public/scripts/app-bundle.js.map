{"version":3,"sources":["src/app.js","src/auth-config.js","src/environment.js","src/main.js","src/modules/home.js","src/modules/list.js","src/resources/index.js","src/resources/data/data-services.js","src/resources/data/todos.js","src/resources/data/users.js","src/resources/elements/flatpickr.js","src/resources/value-converters/completed.js","src/resources/value-converters/date-format.js"],"names":["App","message","configureRouter","config","router","addPipelineStep","map","authConfig","debug","testing","configure","window","regeneratorRuntime","Promise","aurelia","use","standardConfiguration","plugin","baseConfig","feature","developmentLogging","start","then","setRoot","Home","users","auth","loginError","showLogin","login","email","password","sessionStorage","setItem","JSON","stringify","response","user","navigate","catch","console","log","error","showRegister","User","firstName","lastName","registerError","save","serverResponse","List","todos","parse","getItem","showList","showCompleted","priorities","logout","removeItem","createTodo","todoObj","Date","_id","saveTodo","alert","todoId","filesToUpload","length","uploadFile","activate","getUserTodos","editTodo","todo","deleteTodo","completeTodo","completed","changeFiles","Array","push","files","removeFile","index","splice","toggleShowCompleted","globalResources","DataServices","http","httpClient","BASE_URL","withBaseUrl","withDefaults","withInterceptor","request","method","url","authHeader","localStorage","headers","append","status","get","fetch","json","data","post","content","object","put","delete","uploadFiles","ToDos","TODO_SERVICE","todosArray","id","i","userId","formData","FormData","forEach","item","Users","USER_SERVICE","severResponse","FlatPickerCustomElement","Element","twoWay","element","bind","defaultConfig","_config","Object","assign","onChange","onMonthChange","onYearChange","attached","flatpickr","querySelector","selectedDates","dateStr","instance","value","valueChanged","newDate","undefined","setDate","CompletedValueConverter","toView","array","filter","DateFormatValueConverter","format"],"mappings":";;;;;;;;;;;;;;MAEaA,cAAAA;AACX,mBAAc;AAAA;;AACZ,WAAKC,OAAL,GAAe,MAAf;AACD;;kBACDC,2CAAgBC,QAAQC,QAAQ;AAC9B,WAAKA,MAAL,GAAcA,MAAd;AACAD,aAAOE,eAAP,CAAuB,WAAvB;AACAF,aAAOG,GAAP,CAAW,CACT;AACE,iBAAQ,CAAC,EAAD,EAAI,MAAJ,CADV;AAEE,oBAAY,gBAFd;AAGE,gBAAO;AAHT,OADS,EAMT;AACE,iBAAQ,MADV;AAEE,oBAAW,gBAFb;AAGE,gBAAO,MAHT;AAIE,gBAAO;AAJT,OANS,CAAX;AAaD;;;;;;;;;;;ACtBH,QAAIC,aAAa;AACb,mBAAW,2BADE;AAEb,oBAAY,cAFC;AAGb,qBAAa,OAHA;AAIb,sBAAc,eAJD;AAKb,qBAAa,EALA;AAMb,0BAAkB;AANL,KAAjB;;sBASeA;;;;;;;;oBCTA;AACbC,WAAO,IADM;AAEbC,aAAS;AAFI;;;;;;;;UCQCC,YAAAA;;;;;;;;;;;;;;AALhBC,SAAOC,kBAAP;;AAGAC,UAAQV,MAAR,CAAe,EAAE,YAAY,EAAE,oBAAoB,KAAtB,EAAd,EAAf;;AAEO,WAASO,SAAT,CAAmBI,OAAnB,EAA4B;AACjCA,YAAQC,GAAR,CACGC,qBADH,GAEGC,MAFH,CAEU,cAFV,EAE0B,UAACC,UAAD,EAAgB;AAAEA,iBAAWR,SAAX;AAA+B,KAF3E,EAGGS,OAHH,CAGW,WAHX;;AAKA,QAAI,sBAAYX,KAAhB,EAAuB;AACrBM,cAAQC,GAAR,CAAYK,kBAAZ;AACD;;AAED,QAAI,sBAAYX,OAAhB,EAAyB;AACvBK,cAAQC,GAAR,CAAYE,MAAZ,CAAmB,iBAAnB;AACD;;AAEDH,YAAQO,KAAR,GAAgBC,IAAhB,CAAqB;AAAA,aAAMR,QAAQS,OAAR,EAAN;AAAA,KAArB;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QCjBYC,eAAAA,eADZ;AAEG,sBAAYpB,MAAZ,EAAoBqB,KAApB,EAA2BC,IAA3B,EAAiC;AAAA;;AAC7B,iBAAKtB,MAAL,GAAcA,MAAd;AACA,iBAAKsB,IAAL,GAAYA,IAAZ;AACA,iBAAKC,UAAL,GAAkB,EAAlB;AACA,iBAAKF,KAAL,GAAaA,KAAb;AACA,iBAAKxB,OAAL,GAAe,MAAf;AACA,iBAAK2B,SAAL,GAAiB,IAAjB;AACH;;uBAEDC,yBAAQ;AAAA;;AACJ,mBAAO,KAAKH,IAAL,CAAUG,KAAV,CAAgB,KAAKC,KAArB,EAA4B,KAAKC,QAAjC,EACNT,IADM,CACD,oBAAY;AACdU,+BAAeC,OAAf,CAAuB,MAAvB,EAA+BC,KAAKC,SAAL,CAAeC,SAASC,IAAxB,CAA/B;AACA,sBAAKV,UAAL,GAAkB,EAAlB;AACA,sBAAKvB,MAAL,CAAYkC,QAAZ,CAAqB,MAArB;AACH,aALM,EAMNC,KANM,CAMA,iBAAS;AACZC,wBAAQC,GAAR,CAAY,cAAZ;AACAD,wBAAQC,GAAR,CAAYC,KAAZ;AACA,sBAAKf,UAAL,GAAkB,sBAAlB;AACH,aAVM,CAAP;AAWH;;uBAEDgB,uCAAe;AACX,iBAAKC,IAAL,GAAY;AACRC,2BAAW,EADH;AAERC,0BAAU,EAFF;AAGRhB,uBAAO,EAHC;AAIRC,0BAAU;AAJF,aAAZ;AAMA,iBAAKgB,aAAL,GAAqB,EAArB;AACA,iBAAKnB,SAAL,GAAiB,KAAjB;AACH;;uBAEKoB;;;;;;;;uCACyB,KAAKvB,KAAL,CAAWuB,IAAX,CAAgB,KAAKX,IAArB;;;AAAvBY;;AACJ,oCAAI,CAACA,eAAeP,KAApB,EAA2B;AACvB,yCAAKd,SAAL,GAAiB,IAAjB;AACH,iCAFD,MAEO;AACH,yCAAKmB,aAAL,GAAqB,4CAArB;AACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QC1CIG,eAAAA,eADZ;AAEG,sBAAYC,KAAZ,EAAmBzB,IAAnB,EAAyB;AAAA;;AACrB,iBAAKyB,KAAL,GAAaA,KAAb;AACA,iBAAKzB,IAAL,GAAYA,IAAZ;;AAEA,iBAAKW,IAAL,GAAYH,KAAKkB,KAAL,CAAWpB,eAAeqB,OAAf,CAAuB,MAAvB,CAAX,CAAZ;AACA,iBAAKC,QAAL,GAAgB,IAAhB;AACA,iBAAKC,aAAL,GAAqB,KAArB;AACA,iBAAKC,UAAL,GAAkB,CAAC,KAAD,EAAQ,QAAR,EAAkB,MAAlB,EAA0B,UAA1B,CAAlB;AACH;;uBAEDC,2BAAS;AACLzB,2BAAe0B,UAAf,CAA0B,MAA1B;AACA,iBAAKhC,IAAL,CAAU+B,MAAV;AACH;;uBAEDE,mCAAa;AACT,iBAAKC,OAAL,GAAe;AACX,wBAAQ,EADG;AAEX,+BAAe,EAFJ;AAGX,2BAAW,IAAIC,IAAJ,EAHA;AAIX,0BAAU,KAAKxB,IAAL,CAAUyB,GAJT;AAKX,4BAAY,KAAKN,UAAL,CAAgB,CAAhB;AALD,aAAf;AAOA,iBAAKF,QAAL,GAAgB,KAAhB;AACH;;uBAEKS;;;;;;;qCACE,KAAKH;;;;;;uCACgB,KAAKT,KAAL,CAAWH,IAAX,CAAgB,KAAKY,OAArB;;;AAAjBxB;;qCACAA,SAASM;;;;;AACTsB,sCAAM,sCAAN;;;;;AAEIC,yCAAS7B,SAAS0B;;sCAClB,KAAKI,aAAL,IAAsB,KAAKA,aAAL,CAAmBC;;;;;;uCACnC,KAAKhB,KAAL,CAAWiB,UAAX,CAAsB,KAAKF,aAA3B,EAA0C,KAAK7B,IAAL,CAAUyB,GAApD,EAAyDG,MAAzD;;;AACN,qCAAKC,aAAL,GAAqB,EAArB;;;AAGR,qCAAKZ,QAAL,GAAgB,IAAhB;;;;;;;;;;;;;;;;;uBAIFe;;;;;;;uCACI,KAAKlB,KAAL,CAAWmB,YAAX,CAAwB,KAAKjC,IAAL,CAAUyB,GAAlC;;;;;;;;;;;;;;;;;uBAGVS,6BAASC,MAAM;AACX,iBAAKZ,OAAL,GAAeY,IAAf;AACA,iBAAKlB,QAAL,GAAgB,KAAhB;AACH;;uBAEDmB,iCAAWD,MAAM;AACb,iBAAKrB,KAAL,CAAWsB,UAAX,CAAsBD,KAAKV,GAA3B;AACH;;uBAEDY,qCAAaF,MAAM;AACfA,iBAAKG,SAAL,GAAiB,CAACH,KAAKG,SAAvB;AACA,iBAAKf,OAAL,GAAeY,IAAf;AACA,iBAAKT,QAAL;AACH;;uBAEDa,qCAAc;AACV,iBAAKV,aAAL,GAAqB,IAAIW,KAAJ,EAArB;AACA,iBAAKX,aAAL,CAAmBY,IAAnB,CAAwB,KAAKC,KAAL,CAAW,CAAX,CAAxB;AACH;;uBAEDC,iCAAWC,OAAO;AACd,iBAAKf,aAAL,CAAmBgB,MAAnB,CAA0BD,KAA1B,EAAgC,CAAhC;AACH;;uBAEDE,qDAAsB;AAClB,iBAAK5B,aAAL,GAAqB,CAAC,KAAKA,aAA3B;AACH;;;;;;;;;;;UC9EW7C,YAAAA;AAAT,WAASA,SAAT,CAAmBP,MAAnB,EAA2B;AAChCA,WAAOiF,eAAP,CAAuB,CACrB,gCADqB,EAErB,8BAFqB,EAGrB,sBAHqB,CAAvB;AAKD;;;;;;;;;;;;;;;;;;QCFYC,uBAAAA,uBADZ;AAEG,8BAAYC,IAAZ,EAAkB;AAAA;;AAAA;;AACd,iBAAKC,UAAL,GAAkBD,IAAlB;AACA,iBAAKE,QAAL,GAAgB,4BAAhB;;AAEA,iBAAKD,UAAL,CAAgB7E,SAAhB,CAA0B,kBAAU;AAChCP,uBACKsF,WADL,CACiB,MAAKD,QADtB,EAEKE,YAFL,CAEkB;AACV,mCAAe,aADL;AAEV,+BAAW;AACP,kCAAU,kBADH;AAEP,4CAAoB;AAFb;AAFD,iBAFlB,EASKC,eATL,CASqB;AACbC,2BADa,mBACLA,QADK,EACI;AACbpD,gCAAQC,GAAR,iBAA0BmD,SAAQC,MAAlC,SAA4CD,SAAQE,GAApD;AACA,4BAAIC,aAAa,YAAYC,aAAa3C,OAAb,CAAqB,eAArB,CAA7B;AACAuC,iCAAQK,OAAR,CAAgBC,MAAhB,CAAuB,eAAvB,EAAwCH,UAAxC;AACA,+BAAOH,QAAP;AACH,qBANY;AAObxD,4BAPa,oBAOJA,SAPI,EAOM;AACfI,gCAAQC,GAAR,eAAwBL,UAAS+D,MAAjC,SAA2C/D,UAAS0D,GAApD;AACA,+BAAO1D,SAAP;AACH;AAVY,iBATrB;AAqBH,aAtBD;AAuBH;;+BAEDgE,mBAAIN,KAAK;AACL,mBAAO,KAAKP,UAAL,CAAgBc,KAAhB,CAAsBP,GAAtB,EACFxE,IADE,CACG;AAAA,uBAAYc,SAASkE,IAAT,EAAZ;AAAA,aADH,EAEFhF,IAFE,CAEG,gBAAQ;AACV,uBAAOiF,IAAP;AACH,aAJE,EAKFhE,KALE,CAKI,iBAAS;AACZ,uBAAOG,KAAP;AACH,aAPE,CAAP;AAQH;;+BAED8D,qBAAKC,SAASX,KAAK;AACf,mBAAO,KAAKP,UAAL,CACFc,KADE,CACIP,GADJ,EACS;AACR,0BAAU,MADF;AAER,wBAAQ,8BAAKW,OAAL;AAFA,aADT,EAKFnF,IALE,CAKG;AAAA,uBAAYc,SAASkE,IAAT,EAAZ;AAAA,aALH,EAMFhF,IANE,CAMG,kBAAU;AACZ,uBAAOoF,MAAP;AACH,aARE,EASFnE,KATE,CASI,iBAAS;AACZ,uBAAOG,KAAP;AACH,aAXE,CAAP;AAYH;;+BAEDiE,mBAAIF,SAASX,KAAK;AACd,mBAAO,KAAKP,UAAL,CACFc,KADE,CACIP,GADJ,EACS;AACR,0BAAU,KADF;AAER,wBAAQ,8BAAKW,OAAL;AAFA,aADT,EAKFnF,IALE,CAKG;AAAA,uBAAYc,SAASkE,IAAT,EAAZ;AAAA,aALH,EAMFhF,IANE,CAMG,kBAAU;AACZ,uBAAOoF,MAAP;AACH,aARE,EASFnE,KATE,CASI,iBAAS;AACZ,uBAAOG,KAAP;AACH,aAXE,CAAP;AAYH;;+BAEDkE,0BAAOd,KAAK;AACR,mBAAO,KAAKP,UAAL,CACFc,KADE,CACIP,GADJ,EACS;AACR,0BAAU;AADF,aADT,EAIFxE,IAJE,CAIG;AAAA,uBAAYc,SAASkE,IAAT,EAAZ;AAAA,aAJH,EAKFhF,IALE,CAKG,kBAAU;AACZ,uBAAOoF,MAAP;AACH,aAPE,EAQFnE,KARE,CAQI,iBAAS;AACZ,uBAAOG,KAAP;AACH,aAVE,CAAP;AAWH;;+BAEDmE,mCAAY9B,OAAOe,KAAK;AACpB,mBAAO,KAAKP,UAAL,CACNc,KADM,CACAP,GADA,EACK;AACR,0BAAU,MADF;AAER,wBAAQf;AAFA,aADL,EAKNzD,IALM,CAKD;AAAA,uBAAYc,SAASkE,IAAT,EAAZ;AAAA,aALC,EAMNhF,IANM,CAMD,kBAAU;AACZ,uBAAOoF,MAAP;AACH,aARM,EASNnE,KATM,CASA,iBAAS;AACZ,uBAAOG,KAAP;AACH,aAXM,CAAP;AAYH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QClGQoE,gBAAAA,gBADZ;AAEG,uBAAYP,IAAZ,EAAkB;AAAA;;AACd,iBAAKA,IAAL,GAAYA,IAAZ;AACA,iBAAKQ,YAAL,GAAoB,OAApB;AACA,iBAAKC,UAAL,GAAkB,EAAlB;AACH;;wBAEK1C;kFAAa2C;;;;;;;uCACM,KAAKV,IAAL,CAAUH,GAAV,CAAc,KAAKW,YAAL,GAAoB,QAApB,GAA+BE,EAA7C;;;AAAjB7E;;AACJ,oCAAI,CAACA,SAASM,KAAV,IAAmB,CAACN,SAASnC,OAAjC,EAA0C;AACtC,yCAAK+G,UAAL,GAAkB5E,QAAlB;AACH;;;;;;;;;;;;;;;;;wBAGCY;oFAAKwB;;;;;;;qCACHA;;;;;oCACKA,KAAKV;;;;;;uCACe,KAAKyC,IAAL,CAAUC,IAAV,CAAehC,IAAf,EAAqB,KAAKuC,YAA1B;;;AAAjB3E;;AACJ,oCAAI,CAACA,SAASM,KAAd,EAAqB;AACjB,yCAAKsE,UAAL,CAAgBlC,IAAhB,CAAqB1C,QAArB;AACH;kEACMA;;;;uCAEc,KAAKmE,IAAL,CAAUI,GAAV,CAAcnC,IAAd,EAAoB,KAAKuC,YAAL,GAAoB,GAApB,GAA0BvC,KAAKV,GAAnD;;;AAAjB1B;;AACJ,oCAAI,CAACA,UAASM,KAAd,EAAqB,CAEpB;kEACMN;;;;;;;;;;;;;;;;;wBAKbqC;oFAAWwC;;;;;;;uCACQ,KAAKV,IAAL,CAAUK,MAAV,CAAiB,KAAKG,YAAL,GAAoB,GAApB,GAA0BE,EAA3C;;;AAAjB7E;;AACJ,oCAAI,CAACA,SAASM,KAAd,EAAqB;AACjB,yCAASwE,CAAT,GAAa,CAAb,EAAgBA,IAAI,KAAKF,UAAL,CAAgB7C,MAApC,EAA4C+C,GAA5C,EAAiD;AAC7C,4CAAI,KAAKF,UAAL,CAAgBE,CAAhB,EAAmBpD,GAAnB,KAA2BmD,EAA/B,EAAmC;AAC/B,iDAAKD,UAAL,CAAgB9B,MAAhB,CAAuBgC,CAAvB,EAA0B,CAA1B;AACH;AACJ;AACJ;;;;;;;;;;;;;;;;;wBAGC9C;oFAAWW,OAAOoC,QAAQlD;;;;;;AACxBmD,2CAAW,IAAIC,QAAJ;;;AAEftC,sCAAMuC,OAAN,CAAc,UAACC,IAAD,EAAOtC,KAAP,EAAiB;AAC3BmC,6CAASlB,MAAT,CAAgB,SAASjB,KAAzB,EAAgCsC,IAAhC;AACH,iCAFD;;;uCAIqB,KAAKhB,IAAL,CAAUM,WAAV,CAAsBO,QAAtB,EAAgC,KAAKL,YAAL,GAAoB,WAApB,GAAkCI,MAAlC,GAA2C,GAA3C,GAAiDlD,MAAjF;;;AAAjB7B;kEACGA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QCnDFoF,gBAAAA,gBADZ;AAEG,uBAAYjB,IAAZ,EAAkB;AAAA;;AACd,iBAAKA,IAAL,GAAYA,IAAZ;AACA,iBAAKkB,YAAL,GAAoB,OAApB;AACH;;wBAEKzE;kFAAKX;;;;;;qCACHA;;;;;;uCAC0B,KAAKkE,IAAL,CAAUC,IAAV,CAAenE,IAAf,EAAqB,KAAKoF,YAA1B;;;AAAtBC;iEACGzE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QCTN0E,kCAAAA,kCADZ,8BAAOC,OAAP,WAEI,gCAAS,EAAE,sBAAsB,8BAAYC,MAApC,EAAT;AAED,yCAAYC,OAAZ,EAAqB;AAAA;;AAAA;;AACjB,iBAAKA,OAAL,GAAeA,OAAf;AACH;;0CAEDC,uBAAO;AACH,gBAAMC,gBAAgB;AAClB,4BAAY,IADM;AAElB,6BAAa,QAFK;AAGlB,wBAAQ;AAHU,aAAtB;;AAMA,iBAAKC,OAAL,GAAeC,OAAOC,MAAP,CAAc,EAAd,EAAkBH,aAAlB,CAAf;AACA,iBAAKC,OAAL,CAAaG,QAAb,GAAwB,KAAKH,OAAL,CAAaI,aAAb,GAA6B,KAAKJ,OAAL,CAAaK,YAAb,GAA4B,KAAKF,QAAL,CAAcL,IAAd,CAAmB,IAAnB,CAAjF;AACH;;0CAEDQ,+BAAW;AACP,iBAAKC,SAAL,GAAiB,wBAAc,KAAKV,OAAL,CAAaW,aAAb,CAA2B,oBAA3B,CAAd,EAAgE,KAAKR,OAArE,CAAjB;AACH;;0CAEDG,6BAASM,eAAeC,SAASC,UAAU;AACvC,iBAAKC,KAAL,GAAaH,cAAc,CAAd,CAAb;AACH;;0CAEDI,uCAAe;AACX,gBAAI,CAAC,KAAKN,SAAV,EAAqB;AACjB;AACH;;AAED,gBAAI,KAAKK,KAAL,KAAe,KAAKL,SAAL,CAAeE,aAAf,CAA6B,CAA7B,CAAnB,EAAoD;AAChD;AACH;;AAED,gBAAIK,UAAU,KAAKF,KAAL,GAAa,KAAKA,KAAlB,GAA0BG,SAAxC;;AAEA,iBAAKR,SAAL,CAAeS,OAAf,CAAuBF,OAAvB;AACH;;;;;;;;;;;;;;;;;;;;;QC1CQG,kCAAAA;;;;;0CACTC,yBAAOC,OAAOP,OAAO;AACjB,gBAAI,CAACA,KAAL,EAAY;AACR,uBAAOO,MAAMC,MAAN,CAAa,gBAAQ;AAAE,2BAAO,CAAC9B,KAAK5C,SAAb;AAAyB,iBAAhD,CAAP;AACH,aAFD,MAEO;AACH,uBAAOyE,KAAP;AACH;AACJ;;;;;;;;;;;;;;;;;;;;;;;;;;;QCLQE,mCAAAA;;;;;2CACTH,yBAAON,OAAO;AACV,gBAAIA,UAAUG,SAAV,IAAuBH,UAAU,IAArC,EAA2C;AACvC;AACH;;AAED,mBAAO,sBAAOA,KAAP,EAAcU,MAAd,CAAqB,aAArB,CAAP;AACH","file":"app-bundle.js","sourcesContent":["import {AuthorizeStep} from \"aurelia-auth\"\n\nexport class App {\n  constructor() {\n    this.message = \"Home\";\n  }\n  configureRouter(config, router) {\n    this.router = router;\n    config.addPipelineStep(\"authorize\", AuthorizeStep);\n    config.map([\n      {\n        \"route\":['','home'],\n        \"moduleId\": './modules/home',\n        \"name\":'Home'\n      },\n      {\n        \"route\":'list',\n        \"moduleId\":'./modules/list',\n        \"name\":'List',\n        \"auth\":true\n      }\n    ]);\n  }\n}","var authConfig = {\r\n    \"baseUrl\": \"http://localhost:5000/api\",\r\n    \"loginUrl\": \"/users/login\",\r\n    \"tokenName\": \"token\",\r\n    \"authHeader\": \"Authorization\",\r\n    \"authToken\": \"\",\r\n    \"logoutRedirect\": \"#/home\"\r\n}\r\n\r\nexport default authConfig;","export default {\n  debug: true,\n  testing: true\n};\n","import environment from './environment';\nimport config from \"./auth-config\";\nimport regeneratorRuntime from './regenerator-runtime';\nwindow.regeneratorRuntime = regeneratorRuntime;\n\n//Configure Bluebird Promises\nPromise.config({ \"warnings\": { \"wForgottenReturn\": false }});\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .plugin(\"aurelia-auth\", (baseConfig) => { baseConfig.configure(config); })\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","import {inject} from 'aurelia-framework';\r\nimport {Router} from 'aurelia-router';\r\nimport {Users} from '../resources/data/users';\r\nimport {AuthService} from \"aurelia-auth\";\r\n\r\n@inject(Router, Users, AuthService)\r\nexport class Home {\r\n    constructor(router, users, auth) {\r\n        this.router = router;\r\n        this.auth = auth;\r\n        this.loginError = \"\";\r\n        this.users = users;\r\n        this.message = \"Home\";\r\n        this.showLogin = true;\r\n    }\r\n\r\n    login() {\r\n        return this.auth.login(this.email, this.password)\r\n        .then(response => {\r\n            sessionStorage.setItem(\"user\", JSON.stringify(response.user));\r\n            this.loginError = \"\";\r\n            this.router.navigate('List');\r\n        })\r\n        .catch(error => {\r\n            console.log(\"login failed\");\r\n            console.log(error);\r\n            this.loginError = \"Invalid credentials.\";\r\n        });\r\n    }\r\n\r\n    showRegister() {\r\n        this.User = {\r\n            firstName: \"\",\r\n            lastName: \"\",\r\n            email: \"\",\r\n            password: \"\"\r\n        };\r\n        this.registerError = \"\";\r\n        this.showLogin = false;\r\n    }\r\n\r\n    async save() {\r\n        let serverResponse = await this.users.save(this.user);\r\n        if (!serverResponse.error) {\r\n            this.showLogin = true;\r\n        } else {\r\n            this.registerError = \"There was a problem registering this user.\";\r\n        }\r\n    }\r\n}","import {inject} from 'aurelia-framework';\r\nimport {ToDos} from '../resources/data/todos';\r\nimport {AuthService} from \"aurelia-auth\";\r\n\r\n@inject(ToDos, AuthService)\r\nexport class List {\r\n    constructor(todos, auth) {\r\n        this.todos = todos;\r\n        this.auth = auth;\r\n        \r\n        this.user = JSON.parse(sessionStorage.getItem(\"user\"));\r\n        this.showList = true;\r\n        this.showCompleted = false;\r\n        this.priorities = [\"Low\", \"Medium\", \"High\", \"Critical\"];\r\n    }\r\n\r\n    logout() {\r\n        sessionStorage.removeItem(\"user\");\r\n        this.auth.logout();\r\n    }\r\n\r\n    createTodo() {\r\n        this.todoObj = {\r\n            \"todo\": \"\",\r\n            \"description\": \"\",\r\n            \"dateDue\": new Date(),\r\n            \"userId\": this.user._id,\r\n            \"priority\": this.priorities[0]\r\n        }\r\n        this.showList = false;\r\n    }\r\n\r\n    async saveTodo() {\r\n        if (this.todoObj) {\r\n            let response = await this.todos.save(this.todoObj);\r\n            if (response.error) {\r\n                alert(\"There was an error creating the ToDo\");\r\n            } else {\r\n                var todoId = response._id;\r\n                if (this.filesToUpload && this.filesToUpload.length) {\r\n                    await this.todos.uploadFile(this.filesToUpload, this.user._id, todoId);\r\n                    this.filesToUpload = [];\r\n                }\r\n            }\r\n            this.showList = true;\r\n        }\r\n    }\r\n\r\n    async activate() {\r\n        await this.todos.getUserTodos(this.user._id);\r\n    }\r\n    \r\n    editTodo(todo) {\r\n        this.todoObj = todo;\r\n        this.showList = false;\r\n    }\r\n    \r\n    deleteTodo(todo) {\r\n        this.todos.deleteTodo(todo._id);\r\n    }\r\n\r\n    completeTodo(todo) {\r\n        todo.completed = !todo.completed;\r\n        this.todoObj = todo;\r\n        this.saveTodo();\r\n    }\r\n\r\n    changeFiles() {\r\n        this.filesToUpload = new Array();\r\n        this.filesToUpload.push(this.files[0]);\r\n    }\r\n\r\n    removeFile(index) {\r\n        this.filesToUpload.splice(index,1);\r\n    }\r\n\r\n    toggleShowCompleted() {\r\n        this.showCompleted = !this.showCompleted;\r\n    }\r\n}","export function configure(config) {\n  config.globalResources([\n    \"./value-converters/date-format\",\n    \"./value-converters/completed\",\n    \"./elements/flatpickr\"\n  ]);\n}\n","import {inject} from 'aurelia-framework';\r\nimport {HttpClient, json} from 'aurelia-fetch-client';\r\n\r\n@inject(HttpClient)\r\nexport class DataServices {\r\n    constructor(http) {\r\n        this.httpClient = http;\r\n        this.BASE_URL = \"http://localhost:5000/api/\";\r\n\r\n        this.httpClient.configure(config => {\r\n            config\r\n                .withBaseUrl(this.BASE_URL)\r\n                .withDefaults({\r\n                    \"credentials\": \"same-origin\",\r\n                    \"headers\": {\r\n                        \"Accept\": \"application/json\",\r\n                        \"X-Requested-With\": \"Fetch\"\r\n                    }\r\n                })\r\n                .withInterceptor({\r\n                    request(request) {\r\n                        console.log(`Requesting ${request.method} ${request.url}`);\r\n                        var authHeader = \"Bearer \" + localStorage.getItem(\"aurelia_token\");\r\n                        request.headers.append(\"Authorization\", authHeader);\r\n                        return request;\r\n                    },\r\n                    response(response) {\r\n                        console.log(`Received ${response.status} ${response.url}`);\r\n                        return response;\r\n                    }\r\n                });\r\n        });\r\n    }\r\n\r\n    get(url) {\r\n        return this.httpClient.fetch(url)\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                return data;\r\n            })\r\n            .catch(error => {\r\n                return error;\r\n            });\r\n    }\r\n\r\n    post(content, url) {\r\n        return this.httpClient\r\n            .fetch(url, {\r\n                \"method\": \"post\",\r\n                \"body\": json(content)\r\n            })\r\n            .then(response => response.json())\r\n            .then(object => {\r\n                return object;\r\n            })\r\n            .catch(error => {\r\n                return error;\r\n            })\r\n    }\r\n    \r\n    put(content, url) {\r\n        return this.httpClient\r\n            .fetch(url, {\r\n                \"method\": \"put\",\r\n                \"body\": json(content)\r\n            })\r\n            .then(response => response.json())\r\n            .then(object => {\r\n                return object;\r\n            })\r\n            .catch(error => {\r\n                return error;\r\n            })\r\n    }\r\n    \r\n    delete(url) {\r\n        return this.httpClient\r\n            .fetch(url, {\r\n                \"method\": \"delete\"\r\n            })\r\n            .then(response => response.json())\r\n            .then(object => {\r\n                return object;\r\n            })\r\n            .catch(error => {\r\n                return error;\r\n            });\r\n    }\r\n\r\n    uploadFiles(files, url) {\r\n        return this.httpClient\r\n        .fetch(url, {\r\n            \"method\": \"post\",\r\n            \"body\": files\r\n        })\r\n        .then(response => response.json())\r\n        .then(object => {\r\n            return object;\r\n        })\r\n        .catch(error => {\r\n            return error;\r\n        });\r\n    }\r\n}","import {inject} from \"aurelia-framework\";\r\nimport {DataServices} from \"./data-services\";\r\n\r\n@inject(DataServices)\r\nexport class ToDos {\r\n    constructor(data) {\r\n        this.data = data;\r\n        this.TODO_SERVICE = \"todos\";\r\n        this.todosArray = [];\r\n    }\r\n\r\n    async getUserTodos(id) {\r\n        let response = await this.data.get(this.TODO_SERVICE + \"/user/\" + id);\r\n        if (!response.error && !response.message) {\r\n            this.todosArray = response;\r\n        }\r\n    }\r\n\r\n    async save(todo) {\r\n        if (todo) {\r\n            if (!todo._id) {\r\n                let response = await this.data.post(todo, this.TODO_SERVICE);\r\n                if (!response.error) {\r\n                    this.todosArray.push(response);\r\n                }\r\n                return response;\r\n            } else {\r\n                let response = await this.data.put(todo, this.TODO_SERVICE + \"/\" + todo._id);\r\n                if (!response.error) {\r\n                    //this.todosArray.push(response);\r\n                }\r\n                return response;\r\n            }\r\n        }\r\n    }\r\n\r\n    async deleteTodo(id) {\r\n        let response = await this.data.delete(this.TODO_SERVICE + \"/\" + id);\r\n        if (!response.error) {\r\n            for (let i = 0; i < this.todosArray.length; i++) {\r\n                if (this.todosArray[i]._id === id) {\r\n                    this.todosArray.splice(i, 1);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    \r\n    async uploadFile(files, userId, todoId) {\r\n        let formData = new FormData();\r\n\r\n        files.forEach((item, index) => {\r\n            formData.append(\"file\" + index, item);\r\n        });\r\n\r\n        let response = await this.data.uploadFiles(formData, this.TODO_SERVICE + \"/uploads/\" + userId + \"/\" + todoId);\r\n        return response;\r\n    }\r\n}","import {inject} from 'aurelia-framework';\r\nimport {DataServices} from './data-services';\r\n\r\n@inject(DataServices)\r\nexport class Users {\r\n    constructor(data) {\r\n        this.data = data;\r\n        this.USER_SERVICE = \"users\";\r\n    }\r\n\r\n    async save(user) {\r\n        if (user) {\r\n            let severResponse = await this.data.post(user, this.USER_SERVICE);\r\n            return serverResponse;\r\n        }\r\n    }\r\n}","import {inject, bindable, bindingMode} from 'aurelia-framework';\r\nimport Flatpickr from 'flatpickr';\r\n\r\n@inject(Element)\r\nexport class FlatPickerCustomElement { \r\n    @bindable({ \"defaultBindingMode\": bindingMode.twoWay }) value;\r\n\r\n    constructor(element) {\r\n        this.element = element;\r\n    }\r\n\r\n    bind() {\r\n        const defaultConfig = {\r\n            \"altInput\": true,\r\n            \"altFormat\": \"F j, Y\",\r\n            \"wrap\": true\r\n        };\r\n\r\n        this._config = Object.assign({}, defaultConfig);\r\n        this._config.onChange = this._config.onMonthChange = this._config.onYearChange = this.onChange.bind(this);\r\n    }\r\n\r\n    attached() {\r\n        this.flatpickr = new Flatpickr(this.element.querySelector(\".aurelia-flatpickr\"), this._config);\r\n    }\r\n\r\n    onChange(selectedDates, dateStr, instance) {\r\n        this.value = selectedDates[0]\r\n    }\r\n\r\n    valueChanged() {\r\n        if (!this.flatpickr) {\r\n            return;\r\n        }\r\n\r\n        if (this.value === this.flatpickr.selectedDates[0]) {\r\n            return;\r\n        }\r\n\r\n        let newDate = this.value ? this.value : undefined;\r\n\r\n        this.flatpickr.setDate(newDate);\r\n    }\r\n}","export class CompletedValueConverter {\r\n    toView(array, value) {\r\n        if (!value) {\r\n            return array.filter(item => { return !item.completed; });\r\n        } else {\r\n            return array;\r\n        }\r\n    }\r\n}","import moment from 'moment';\r\n\r\nexport class DateFormatValueConverter {\r\n    toView(value) {\r\n        if (value === undefined || value === null) {\r\n            return;\r\n        }\r\n\r\n        return moment(value).format(\"MMM do YYYY\")\r\n    }\r\n}"],"sourceRoot":".."}